"use strict";!function(e){function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var s=new Proxy(function(){function n(e,t){a(this,n),this.source=e,this.info=t}return l(n,[{key:"value",get:function(){return void 0!==this.info?this.source[this.info]:this.source},set:function(e){void 0!==this.info?this.source[this.info]=e:this.source=e}}]),n}(),{apply:function(e,t,n){return o(e,c(n))}});function b(e,t){var n=e.props,r=t.props,o={},i=!0;return Object.keys(n).forEach(function(e){r[e]!==n[e]&&(i=!1,o[e]=[n[e],r[e]])}),Object.keys(r).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)||(i=!1,o[e]=[null,r[e]])}),i?null:o}function p(e,t){return function e(t,n,r,o){var i=2<arguments.length&&void 0!==r?r:0,c=3<arguments.length&&void 0!==o?o:{};if(0===t.length)return c;for(var u=[],a=[],f=Math.max(t.length,n.length),l=0;l<f;l+=1){var s=t[l],p=n[l];if(s&&p){var h=i+l+1;if(u=u.concat(s.children||[]),a=a.concat(p.children||[]),s.isText)p.isText?s.text!==p.text&&(c[h]={type:"TEXT",text:p.text}):c[h]={type:"REPLACE",node:p};else if(p.tagName!==s.tagName)c[h]={type:"REPLACE",node:p};else{var d=b(s,p);d&&(c[h]={type:"PROPS",props:d})}}else if(s){var y=i+n.length+1;c[y]?c[y].moves.push({index:l,type:0,node:s}):c[y]={type:"REORDER",moves:[{index:l,type:0,node:s}]}}else{var v=i+t.length;c[v]?c[v].moves.push({index:l,type:1,node:p}):c[v]={type:"REORDER",moves:[{index:l,type:1,node:p}]}}}return e(u,a,i+t.length,c)}([e],[t],-1)}function h(i,c){if(c){var e=Object.keys(c);0<e.length&&(function(e,t){var o=[];o.push(s(e));for(var n=function(e){var r=o[e].value;"string"!=typeof r&&r.children&&0<r.children.length&&r.children.forEach(function(e,t){var n=t;o.push(s(r.children,n))})},r=0;r<o.length;r+=1)n(r);e.indexs=o}(i),e.forEach(function(r){var e=c[r];if("REPLACE"===e.type){var t=i.indexs[r].value.$el;t&&t.parentNode.replaceChild(e.node.render(),t),i.indexs[r].value=e.node}else if("PROPS"===e.type)!function(t,n){if("string"!=typeof t&&!t.isText||console.warn("no way here: set props for a textnode"),n){var e=Object.keys(n);0<e.length&&e.forEach(function(e){t.props[e]=n[e][1],t.setAttr(e,n[e][1],n[e][0])})}}(i.indexs[r].value,e.props);else if("TEXT"===e.type){var n=i.indexs[r].value,o=n.$el;o&&(n.text=e.text,o.nodeValue=e.text)}else"REORDER"===e.type&&(e.moves.filter(function(e){return 0===e.type}).sort(function(e,t){return e.index<t.index?1:-1}).forEach(function(t){var e=i.indexs[r].source;t.node&&t.node.$el&&t.node.$el.parentNode&&t.node.$el.parentNode.removeChild(t.node.$el),e.splice(e.findIndex(function(e){return e===t.node}),1)}),e.moves.filter(function(e){return 1===e.type}).sort(function(e,t){return e.index>t.index?1:-1}).forEach(function(e){var t=i.indexs[r],n=t.source;t.value;n&&0<n.length&&n[0].$el.parentNode.appendChild(e.node.render()),i.indexs[r].source.push(e.node)}))}))}}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function o(e,t,n){return(o=r()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return u(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var d=function(){function t(e){a(this,t),this.state={},this.props=e,this.preRendered=null}return l(t,[{key:"setState",value:function(e){Object.assign(this.state,e);var t=p(this.preRendered,this.render());h(this.preRendered,t)}},{key:"mount",value:function(e){e.firstElementChild&&e.firstElementChild.remove(),this.preRendered=this.render(),this.preRendered&&e.appendChild(this.preRendered.render())}},{key:"render",value:function(){return null}}]),t}(),y=new Proxy(d,{apply:function(e,t,n){return o(e,c(n))}});function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function o(e,t,n){return(o=r()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return u(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var v=new Proxy(function(){function i(e,t,n){var r=this;a(this,i),this.tagName=e,this.props=t||{},this.children=n||[],this.key=t?t.key:void 0,this.isText=!1,this.text="";var o=0;this.children.forEach(function(e,t){if(e instanceof i)o+=e.count;else if(e instanceof d)r.children[t]=e.render();else{var n=new i;n.isText=!0,n.text=e,r.children[t]=n}o+=1}),this.count=o}return l(i,[{key:"render",value:function(){var t=this;if(this.isText){var e=document.createTextNode(this.text);return this.$el=e}var n=document.createElement(this.tagName);this.$el=n;var r=this.props;return Object.keys(r).forEach(function(e){t.setAttr(e,r[e])}),this.children.forEach(function(e){var t=e&&e.render();t&&n.appendChild(t)}),n}},{key:"setAttr",value:function(e,t,n){if("function"==typeof t&&e.startsWith("@")){var r=e.slice(1);n&&this.$el.removeEventListener(r,n),this.$el.addEventListener(r,t)}else this.$el.setAttribute(e,t)}}]),i}(),{apply:function(e,t,n){return o(e,c(n))}});e.avd={diff:p,applyDiff:h,KElement:v,KComponent:y}}(window);